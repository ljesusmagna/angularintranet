(function(f){var k=this,d=7,h=244,i="http://www.cptec.inpe.br/cidades/tempo/"+h,l=require("moment"),e="http://moldavia:8082/CPTM.WebAPI/api/Weather/Forecast?cityId="+h,c=60*1000;this.State=ko.observable("loading");this.LineNumber=ko.observable(d);this.CityName=ko.observable();this.Provider=ko.observable();this.ServiceInfoURL=ko.observable();this.day_0=ko.observable(new g());this.day_1=ko.observable(new g());this.day_2=ko.observable(new g());this.day_3=ko.observable(new g());(function a(){$.get(e,function(m){j(m);setTimeout(a,60*c)}).fail(function(){b();setTimeout(a,2*c)})})();function b(){k.State("fail")}function j(r){k.CityName(r.CityName);k.Provider(r.Provider);k.ServiceInfoURL(i);for(var q=0;q<r.Forecasts.length;q++){var n=k["day_"+q],m=r.Forecasts[q],p,o;if(typeof n==="undefined"){return}o=n();if(q===0){p="Hoje"}else{if(q===1){p="AmanhÃ£"}else{p=l(m.Date).format("dddd")}}o.DateDisplay(p);o.WeatherDescription(m.WeatherDescription);o.MinimumTemperature(m.MinimumTemperature);o.MaximumTemperature(m.MaximumTemperature);o.WeatherFlags(m.WeatherFlags);o.Weather(m.Weather)}k.State("ok")}function g(){var m=this;this.Weather=ko.observable();this.DateDisplay=ko.observable();this.WeatherFlags=ko.observable();this.WeatherDescription=ko.observable();this.ServiceInfoURL=ko.observable();this.MinimumTemperature=ko.observable();this.MaximumTemperature=ko.observable()}});